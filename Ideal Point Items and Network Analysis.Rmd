---
title             : "Applying Network Analysis to Ideal Point Personality Item Responses"
shorttitle        : "An Exploratory Analysis"

author: 
  - name          : "Dan Simonet"
    affiliation   : "1"
    corresponding : yes    # Define only one corresponding author
    address       : "Postal address"
    email         : "my@email.com"
  - name          : "Christopher M. Castille"
    affiliation   : "2"

affiliation:
  - id            : "1"
    institution   : "Montclair State University"
  - id            : "2"
    institution   : "Nicholls State University"

author_note: >
  Dan Simonet is an Assistant Professor of Psychology at Montclair State University. Christopher M. Castille is an Assistant Professor of Management and Marketing at Nicholls State University. 

abstract: >
  Personality researchers have recently taken interest in two methodological innovations network and analysis and ideal point item writing strategies. The former suggests that personality is best understood as a network while the latter allows personality traits to be measured more precisely. Here, we explore the value of integrating these two innovations.
  
keywords          : "ideal point, personality, network analysis"
wordcount         : "XXXX"

bibliography      : ["r-references.bib"]

figsintext        : no
figurelist        : no
tablelist         : no
footnotelist      : no
lineno            : yes

lang              : "english"
class             : "man"
output            : papaja::apa6_pdf
---

```{r include = FALSE}
libs <- c("papaja", "psych", "RCurl", "tidyverse", "lavaan", "stringr", "careless", "corrr", "qgraph", "mgm", "bootnet")
lapply(libs, require, character.only = T)

#Note: to access the Google Doc version of this manuscript, see this link: https://docs.google.com/document/d/1it0NpMMMU7aKXdSFGkjxs28XQ5ioiHhGNZY2kC9lTEg/edit
```

#Introduction 

There has long been a call to explain where personality traits come from, how they operate, and how they produce differences in behaviors. Despite offering useful descriptive summaries, the Big Five are largely atheoretical, non-explanatory entities (Block, 1995; Hampson, 2012). A novel solution to this issue has been proposed by the emerging psychometric network approach (Cramer et al., 2012). Rather than treat ‘hidden traits’ as causal forces behind stable behavioral patterns, the network approach models the Big Five as a densely clustered system of directly interacting feelings, thoughts, and behaviors (Cramer et al., 2012). From this perspective, discrete actions like working hard to attain long-term goals, planning one’s week, and focusing on a task to completion in a person high on Conscientiousness do not co-occur because of a top-down biological structure or disposition, but because deciding to care about a long-term goal leads one to be more disciplined in allocation of personal resources. Over time these actions become mutually reinforcing, settle into a stable equilibrium, and manifest as a coherent set of relatively enduring activities.

```{r, echo = FALSE, fig.width = 8, fig.height = 6, fig.align = "center", fig.cap = "Trait model according to a latent variable (left panel) and a network perspective (right panel)"}
knitr::include_graphics("C:/Users/Simmy566/Documents/Ideal-Point-Items-and-Network-Analysis-Project/Latnet_fig1.png")
```

Figure 1 illustrates the distinction. The standard latent variable model treats traits as causes of thoughts, feelings, and behaviors – an idea which implicitly dominates usage of weighted factor scores – whereas the networks sees traits as *consequences* of the interactions between these components. For instance, liking people makes it more likely to accept party invitations, and going to parties and interacting with new people makes the person more talkative, and so forth (Cramer et al., 2012). Forces bonding specific clusters together might be shared biological origins, learning principles, socially enforced norms, or functional aims that produce accretion of multiple explanatory mechanisms which logically unite and reinforce specific personality components (Cramer et al., 2012; Fleeson & Jayawickreme, 2015; Wood, Gardner, & Harms, 2015). For example, Jane may greatly value learning. This may drive her to purposefully exercise greater curiosity and imagination in order to attain the goal of absorbing information (Wood et al., 2015). Over time, Jane seeks environments affording more opportunities for mental expansion which leads to inquisitiveness, problem solving, vocabulary acquisition, and exposure to competing ideas. These components co-evolve because they are mutually dependent – it is hard to solve complex problems without asking questions, acquiring descriptive prowess, or tolerating diversity. The synchronization of such actions leads to a steady-state equilibrium we label Openness to Experience. Based on this perspective, traits are not common causes but, rather, properties that emerge from the complex organization of many interacting parts. This perspective can provide a better view of the cognitive, motivational, and functional dynamics that characterize the development of the personality system, therefore favoring empirical investigations of such mechanisms (Wood et al., 2015).

Multiple papers have applied network models to personality (Costantini & Perugini, 2016), attitudes (Dalege, Borsboom, van Harreveld, Waldorp, & van der Maas, 2017), and clinical disorders (McNally, Robinaugh, Wu, Wang, Deserno, & Borsboom, 2015). While this approach points to interesting implications for validity, dynamics, and change (Schmittmann, Cramer, Waldorp, Epskamp, Kievit, & Borsboom, 2011), one major limitation is almost all investigations use inventories built with dominance rather than ideal-point measurement models. **Review by Chris…** This leads to two major limitations. First, network models assume all major components constituting the network have been effectively codified in current personality inventories. Failure to meet this principle can result in spurious connections and false conclusions about which elements of the personality system consistently activate one another (Borsboom, 2017). Second, the intermediacy of ideal-point items may better capture ‘bridging’ components linking distinct trait clusters. For instance, the conscientiousness item ‘I tend to be disorderly but also like to keep certain things tidy’ may serve as a bridge between an agreeableness item of ‘I don’t like to let others down’ and the remaining network of conscientiousness items. Why? Because development in compassionate items arising from social roles (e.g., serious relationships, care for family) may directly elevate conscientiousness by causing individuals to start bringing their personal affairs in order. That is, when we begin caring about others we may get our ‘act together’ to better meet social responsibilities. Such effects may be less evident in extreme items (I always keep my affairs in order) because developmental processes are gradual and better reflected through intermediate steps. 

The current study unifies these methodological innovations by applying network analyses to a Big Five instrument developed with ideal-point item writing strategies. We contrast four major network properties with research exploring similar properties of common Big Five inventories (Cramer et al., 2012; Constantini et al., 2015; Constantini & Perugini, 2016). The first is the topology, or *large-scale structure*, of the Big Five including global node arrangement and degree of clustering within densely connected nodes along with links that connect otherwise distant clusters (small-worldness; Constantini et al., 2015). Two, we identify the nature and content of cross-trait item pairings to identify possible *bridging* components explaining observed covariance between trait factors (e.g., why do agreeable people tend to be conscientious). Three, we compare the most “central” and “peripheral” nodes with the nature of the central facets identified in past publications. Nodes which are central play a more prominent role in connecting elements of the personality system and, consequentially, may be idea targets for intervention if desiring to shift one’s personality. Finally, given the general importance of emotional stability and conscientiousness for job performance across occupations (citation), we examine the *shortest* pathways that may explain the route through which changes in emotional stability (conscientiousness) may facilitate changes in conscientiousness (emotional stability). 

Ideal point models, like many latent factor models, assumes unidimensionality. Unfortunately, many items are inherently multidimensional (e.g., midrange and extreme items). These items are often associated with high standard errors, if they survive analysis. 
Network models are less restrictive. They can show how multidimensional items reside in a network.
Theoretical approaches by Woods and colleagues suggests that personality descriptions can reflect functional in addition to structural constructs. 

# Methods
We report how we determined our sample size, all data exclusions (if any), all manipulations, and all measures in the study. <!-- 21-word solution (Simmons, Nelson & Simonsohn, 2012; retrieved from http://ssrn.com/abstract=2160588) -->

## Participants
```{r, echo = FALSE}
#data
require(RCurl)
data <- read.csv(text=getURL("https://raw.githubusercontent.com/ThePeopleAnalyticsLab/Ideal-Point-Items-and-Network-Analysis-Project/master/data.csv"), header=T)

#####   Organize Dataset    ##### 
personality <- data[c(69:236)]
names(personality) <- gsub("Here.are.a.number.of.characteristics.that.may.or.may.not.apply.to.you..Please.indicate.the.extent....", "", names(personality), fixed = TRUE)
itemnames <- colnames(personality)
itemnames <- gsub(".", " ", itemnames, fixed=T)

ilen <- c(30, 30, 41, 33, 34)
names <- paste(rep(c("O","Es", "Ex", "Co", "Ag"), ilen), sequence(ilen), sep="")

personality1 <- personality %>% 
                na.omit() %>%  #listwisedeletion
                setNames(names) #relabel all columns 

personality2 <- personality1 %>%  #arrange columns into dominance and ideal point items (my best guess as to which items are which)
select(O1:O3,O6:O9,O12:O13,O18:O22,O26:O27,O4:O5,O10:O11,O14:O17,O23:O25,O28:O30, 
       Es1:Es3, Es6:Es10,Es14:Es15,Es17:Es19,Es22:Es25,Es28:Es30,Es4:Es5,Es11:Es13,Es16,Es20:Es21,Es26:Es27,
       Ex1,Ex3:Ex6,Ex8:Ex16,Ex18,Ex20:Ex21,Ex25:Ex27,Ex28:Ex31,Ex34:Ex37,Ex39:Ex41,Ex2,Ex7,Ex17,Ex19,Ex22:Ex24,Ex28,Ex32:Ex33,Ex38,
       Co1,Co4,Co6:Co7,Co9:Co10,Co14,Co17:Co21,Co24,Co27:Co32,Co2:Co3,Co5,Co8,Co11:Co13,Co15:Co16,Co22:Co23,Co25:Co26,Co33,
       Ag1,Ag3:Ag6,Ag8:Ag11,Ag13:Ag15,Ag20,Ag24:Ag26,Ag28:Ag31,Ag33:Ag34,Ag2,Ag7,Ag12,Ag16:Ag19,Ag21:Ag23,Ag27,Ag32)

#Note: The dataset "personality" contains all the item responses.  
```

## Material

## Procedure

## Data analysis
We used `r cite_r("r-references.bib")` for all our analyses.

### Estimating and Visualizing the Network

Network psychometrics represents items and facets by nodes connected by edges representing statistical relationships. When based on correlations, such networks are often weighted (e.g., show strength of connection), signed (e.g., positive or negative), and undirected. To avoid spurious associations, cross-sectional networks are estimated using regularized partial correlations with graphical least absolute shrinkage and selection (glasso; Epskamp, Borsboom, & Fried, 2017; Friedman et al., 2008). In such networks, edges imply a relationship exists after controlling for all other nodes; likewise, the absence of an edge means two nodes are *conditionally independent* given all others nodes. *Regularization* avoids estimation of false positive associations by assigning penalties so all edges are shrunk with small edges being set to zero. This results in a *sparse* (i.e., conservative) network that safeguards against overfitting by modeling covariance among components with as few connections as possible. Because such models are well-defined and uniquely specified, they facilitate clear and unambiguous interpretation of edge-weight parameters as the strength of *unique* associations between variables, which may in turn highlight potential causal linkages. In the current study we estimated the glasso on a polychoric correlation matrix using the extended EBIC criterium (Epskamp, Costantini, Haslbeck, Cramer, Waldorp, Schmittmann, & Borsboom, 2017) and, given the larger number of items, set the EBIC hyperparameter to a more conservative .8 to err on the side of caution. 

To visualize the final graphs we used the Fruchterman-Reingold algorithm (Fruchterman & Reingold, 1991) that places nodes with stronger and/or more connections more closely together. Positive edges are displayed in green, negative ones in red, and strength of connection is reflected in thicker, more saturated lines. We set the minimum edge value across all networks to .05 to improve interpretability (see Figure 2). An alternative presentation groups all components into their respective Big Five categories with a higher minimal edge value of .10 (Figure 3). This latter figure illustrates  multiple dependent item pairings across traits after controlling for all other associations, a direct violation of the latent factor assumption of local independence. 

```{r, echo=FALSE, warning=FALSE, fig.cap = "Network representation of 168 ideal-point inventory modeled after the NEO-PI facet structure. Each item is represented by a node, and the node number corresponds to the item statements in Table 1. Nodes are connected by green (red) lines if they are positively (negatively) correlated. Line thickness corresponds to correlation strength. The spring-bsaed algorithm (Fruchterman & Reingold, 1991) used to generate the graph places strongly correlated nodes closely together and towards the middle of the graph."}

#### labeling groups in the network ###

big5groups <- c(rep("Openness", 30), rep("Emotional Stability", 30), rep("Extraversion", 41), 
                rep("Conscientiousness", 33), rep("Agreeableness", 34))

### Estimate large network using LASSO with conservative EBIC ####

results <- estimateNetwork(personality1, 
                           default = "EBICglasso",
                           corMethod = "cor_auto",
                           tuning = .80)

q <- qgraph(results$graph, layout = "spring",
       groups = big5groups, labels = colnames(personality1),
       minimum = .05, cut = .10, ###Hide edges <= .05; 
       vsize = 3, esize = 6) ### Increase size of nodes; accentuate largest edges
```

```{r, echo = FALSE, fig.cap = "Same network results from Figure 1 rearranged by Big Five groupings and restricted to display partial correlations .10 or greater. Visualized edges depict strong residual item associations within and between trait factors."}

### Rearrange nodes and minimize more edges. Highlights the unique clusters but also cross-trait components which remain even in the regularized matrix (akin to correlated item residuals in a factor model) ### 

g <- qgraph(results$graph, layout = "groups", ###Arrange nodes by Big5  
       groups = big5groups,
       minimum = .10, ###Hide edges <= .10 - hide only by largest associations
       vsize = 2.5, esize = 6) ### Increase size of nodes; esize accentuates largest edges

```

### Centrality Estimation

A typical way of assessing node importance is to compute centrality indices of the network structure (Costantini et al., 2015; Newman, 2010; Opsahl, Agneessens, & Skvoretz, 2010). Three such measures are (1) *node strength*, quantifying how well a node is directly connected to other nodes by summing all of its absolute edges, (2) *closeness*, quantifying how well a node is indirectly connected to other nodes by taking the inverse of all shortest path lengths between the node and all other nodes, and (3) *betweeness*, quantifying how important a node is in the average path between two other nodes. While such indices often agree, it is possible for a node to be high on one index but low on another. For instance, the Amsterdam airport would score high on *strength* as many airports fly planes in and out of Amsterdam. Comparatively, the airport in Anchorage, Alaska, while low on strength in terms of absolute number of connections, is actually higher than Amsterdam on *betweenness* because it serves as a common hub indirectly connecting many international airports to each other via oversea flights.

```{r, echo = FALSE, fig.height=11, fig.cap = "Centrality plot depicting the betweenness, closeness, and strength of each node."}

cen_tab <- centralityTable(q, standardized = T)

cen_tab <- cen_tab[gtools::mixedorder(cen_tab$node),] 
cen_tab$node <- factor(as.character(cen_tab$node), levels = unique(gtools::mixedsort(as.character(cen_tab$node))))

g <- ggplot(cen_tab, aes(x = value, y = node, group = type)) +
     geom_path() + xlab("") + ylab("") + geom_point() +
     facet_grid( ~ measure, scales = "free") +  
     theme_bw() + scale_y_discrete(breaks = names[c(TRUE, FALSE)]) +
     theme(axis.text.y = element_text(size = 5.5, lineheight = .25))

g

```

### Shortest Pathway

```{r, echo = FALSE, fig.cap = "Network depicting the shortest paths between Conscientiousness and Emotional Stability items. Edges belonging to the shortest-paths are full, while the other edges are dashed."}

##### Examining shortest pathways between two node vectors #####

# We might be interested in the shortest paths between Neuroticism and Conscientiosness. It takes a qgraph object as input and two vectors with sets of nodes##

pathways(q, from = 31:60,  to = 102:134)
```

# Results

# Discussion


\newpage

# References
```{r create_r-references}
r_refs(file = "r-references.bib")
```

```{r, echo = FALSE,  results='asis'}
x <- data.frame(Labels = names, Items = itemnames)
knitr::kable(x, longtable = TRUE) 
```

\setlength{\parindent}{-0.5in}
\setlength{\leftskip}{0.5in}
